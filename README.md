# Mem0 MCP Server v2.0

ğŸ§  **æ™ºèƒ½å†…å­˜ç®¡ç†MCPæœåŠ¡å™¨** - åŸºäºTypeScriptå’Œå®˜æ–¹MCP SDKçš„ä¼ä¸šçº§å®ç°

[![MCP](https://img.shields.io/badge/MCP-2025--06--18-blue)](https://modelcontextprotocol.io)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.5.4-blue)](https://www.typescriptlang.org/)
[![SDK](https://img.shields.io/badge/@modelcontextprotocol/sdk-1.17.4-green)](https://www.npmjs.com/package/@modelcontextprotocol/sdk)
[![Node](https://img.shields.io/badge/Node.js-%3E%3D18-green)](https://nodejs.org/)

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [å·¥å…·è¯´æ˜](#-å·¥å…·è¯´æ˜)
- [APIå‚è€ƒ](#-apiå‚è€ƒ)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒèƒ½åŠ›
- âœ… **å®Œæ•´MCPå®ç°** - ä¸¥æ ¼éµå¾ªMCP 2025-06-18è§„èŒƒ
- âœ… **TypeScriptåŸç”Ÿ** - 100%ç±»å‹å®‰å…¨ï¼Œæ™ºèƒ½ä»£ç æç¤º
- âœ… **6å¤§å†…å­˜å·¥å…·** - è¦†ç›–å†…å­˜ç®¡ç†å…¨ç”Ÿå‘½å‘¨æœŸ
- âœ… **å¤šç­–ç•¥æ”¯æŒ** - è¯­ä¹‰ã€å›¾å½¢ã€æ··åˆç­‰å¤šç§æ‰§è¡Œç­–ç•¥
- âœ… **ä¼ä¸šçº§è®¾è®¡** - ç”Ÿäº§å°±ç»ªï¼Œé«˜å¯ç”¨æ¶æ„

### æŠ€æœ¯ç‰¹ç‚¹
- ğŸš€ **é«˜æ€§èƒ½** - å¼‚æ­¥éé˜»å¡ï¼Œæ”¯æŒå¹¶å‘è¯·æ±‚
- ğŸ”’ **å®‰å…¨å¯é ** - JWTä¼šè¯ç®¡ç†ï¼ŒCORSä¿æŠ¤
- ğŸŒ **çµæ´»éƒ¨ç½²** - æ”¯æŒstdio/HTTPåŒæ¨¡å¼
- ğŸ“Š **å¯è§‚æµ‹æ€§** - å¥åº·æ£€æŸ¥ï¼Œå®æ—¶æ—¥å¿—
- ğŸ”§ **æ˜“äºæ‰©å±•** - æ¨¡å—åŒ–è®¾è®¡ï¼Œæ’ä»¶å‹å¥½

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           MCP Client (Claudeç­‰)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚ HTTP/stdio
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MCP Server (TypeScript)             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Express HTTP Transport Layer     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        McpServer Core (SDK)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚         Memory Tools Layer           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Mem0 API Server                    â”‚
â”‚         (localhost:8000)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 18.0.0
- npm >= 9.0.0
- Mem0 APIæœåŠ¡å™¨ (æœ¬åœ°æˆ–è¿œç¨‹)

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone <repository-url>
cd mem0_mcp_server
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **ç¯å¢ƒé…ç½®**
```bash
# åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘é…ç½®
nano .env
```

ç¯å¢ƒå˜é‡è¯´æ˜ï¼š
```env
# Mem0 APIé…ç½® (å¿…éœ€)
MEM0_API_URL=http://localhost:8000  # Mem0 APIæœåŠ¡å™¨åœ°å€
MEM0_API_KEY=your_api_key          # APIå¯†é’¥(å¦‚éœ€è¦)

# MCPæœåŠ¡å™¨é…ç½® (å¯é€‰)
MCP_HOST=127.0.0.1                 # ç›‘å¬åœ°å€
MCP_PORT=8081                      # ç›‘å¬ç«¯å£
MCP_SESSION_TIMEOUT=3600           # ä¼šè¯è¶…æ—¶(ç§’)
MCP_CORS_ORIGINS=*                 # CORSå…è®¸çš„æº
MCP_DEV_MODE=false                 # å¼€å‘æ¨¡å¼

# Mem0é…ç½® (å¯é€‰)
MEM0_ORG_ID=your_org_id           # ç»„ç»‡ID
MEM0_PROJECT_ID=your_project_id   # é¡¹ç›®ID
MEM0_TIMEOUT=30000                 # è¯·æ±‚è¶…æ—¶(æ¯«ç§’)
MEM0_MAX_RETRIES=3                 # æœ€å¤§é‡è¯•æ¬¡æ•°
```

4. **æ„å»ºé¡¹ç›®**
```bash
npm run build
```

5. **å¯åŠ¨æœåŠ¡å™¨**

**HTTPæ¨¡å¼ (æ¨è)**
```bash
# æœ¬åœ°è®¿é—®
npm run start:http

# å±€åŸŸç½‘è®¿é—®
npm run start:http:external
```

**stdioæ¨¡å¼**
```bash
npm start
```

### éªŒè¯å®‰è£…

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8081/health

# é¢„æœŸè¾“å‡º
{
  "status": "healthy",
  "server": "mem0-mcp-server",
  "version": "2.0.0",
  "timestamp": "2025-08-23T05:00:00.000Z",
  "activeSessions": 0,
  "mem0Api": {
    "url": "http://localhost:8000",
    "connected": true
  }
}
```

## ğŸ› ï¸ å·¥å…·è¯´æ˜

### 1. mem0_add_memory
**åŠŸèƒ½**: ä»å¯¹è¯ä¸­æå–å¹¶æ·»åŠ æ–°å†…å­˜

**å‚æ•°**:
- `messages` (required): å¯¹è¯æ¶ˆæ¯æ•°ç»„
- `user_id` (required): ç”¨æˆ·æ ‡è¯†ç¬¦
- `enable_graph` (optional): å¯ç”¨å›¾å½¢å…³ç³»
- `metadata` (optional): é™„åŠ å…ƒæ•°æ®
- `infer` (optional): è‡ªåŠ¨æ¨ç†äº‹å®

**ç¤ºä¾‹**:
```json
{
  "messages": [
    {"role": "user", "content": "æˆ‘ä¸‹ä¸ªæœˆè¦å»ä¸œäº¬æ—…è¡Œ"},
    {"role": "assistant", "content": "å¥½çš„ï¼Œæˆ‘è®°ä½äº†"}
  ],
  "user_id": "alice",
  "enable_graph": true,
  "metadata": {"category": "travel"}
}
```

### 2. mem0_search_memories
**åŠŸèƒ½**: æ™ºèƒ½æœç´¢å†…å­˜åº“

**å‚æ•°**:
- `query` (required): æœç´¢æŸ¥è¯¢
- `user_id` (required): ç”¨æˆ·ID
- `strategy` (optional): æœç´¢ç­–ç•¥ [semantic|graph|advanced_retrieval|hybrid]
- `top_k` (optional): è¿”å›æ•°é‡
- `threshold` (optional): ç›¸ä¼¼åº¦é˜ˆå€¼

**ç­–ç•¥è¯´æ˜**:
- `semantic`: åŸºäºè¯­ä¹‰å‘é‡çš„ç›¸ä¼¼åº¦æœç´¢
- `graph`: åˆ©ç”¨çŸ¥è¯†å›¾è°±å…³ç³»æœç´¢
- `advanced_retrieval`: é«˜çº§æ£€ç´¢ä¸é‡æ’åº
- `hybrid`: æ··åˆå¤šç§ç­–ç•¥çš„æ™ºèƒ½æœç´¢

### 3. mem0_update_memory
**åŠŸèƒ½**: æ›´æ–°ç°æœ‰å†…å­˜

**æ¨¡å¼**:
- å•ä¸ªæ›´æ–°: æŒ‡å®šmemory_id
- æ‰¹é‡æ›´æ–°: ä½¿ç”¨batch_updatesæ•°ç»„

### 4. mem0_delete_memory
**åŠŸèƒ½**: åˆ é™¤å†…å­˜è®°å½•

**æ¨¡å¼**:
- æŒ‰IDåˆ é™¤: æŒ‡å®šmemory_id
- æŒ‰ç”¨æˆ·åˆ é™¤: æŒ‡å®šuser_id
- æ¡ä»¶åˆ é™¤: ä½¿ç”¨filters
- æ‰¹é‡åˆ é™¤: ä½¿ç”¨batch_deletes

### 5. mem0_selective_memory
**åŠŸèƒ½**: åŸºäºæ¡ä»¶çš„èšåˆæ“ä½œ

**æ“ä½œç±»å‹**:
- `add`: æ·»åŠ ç¬¦åˆæ¡ä»¶çš„å†…å­˜
- `search`: æœç´¢ç¬¦åˆæ¡ä»¶çš„å†…å­˜
- `update`: æ›´æ–°ç¬¦åˆæ¡ä»¶çš„å†…å­˜
- `delete`: åˆ é™¤ç¬¦åˆæ¡ä»¶çš„å†…å­˜

### 6. mem0_criteria_retrieval
**åŠŸèƒ½**: é«˜çº§æ¡ä»¶æ£€ç´¢

**ç‰¹æ€§**:
- æ”¯æŒå¤æ‚çš„AND/ORæ¡ä»¶ç»„åˆ
- å¤šç»´åº¦è¯„åˆ†æœºåˆ¶
- æ™ºèƒ½ç»“æœæ’åº

## ğŸ“¡ APIå‚è€ƒ

### HTTPç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/mcp` | POST | MCPè¯·æ±‚å¤„ç† |
| `/mcp` | GET | SSEäº‹ä»¶æµ |
| `/mcp` | DELETE | ä¼šè¯ç»ˆæ­¢ |
| `/health` | GET | å¥åº·æ£€æŸ¥ |

### MCPåè®®æ–¹æ³•

| æ–¹æ³• | æè¿° |
|------|------|
| `initialize` | åˆå§‹åŒ–ä¼šè¯ |
| `tools/list` | åˆ—å‡ºå¯ç”¨å·¥å…· |
| `tools/call` | è°ƒç”¨å·¥å…· |

## ğŸš¢ éƒ¨ç½²æŒ‡å—

### Dockeréƒ¨ç½²

1. **æ„å»ºé•œåƒ**
```bash
docker build -t mem0-mcp-server .
```

2. **è¿è¡Œå®¹å™¨**
```bash
docker run -d \
  --name mem0-mcp \
  -p 8081:8081 \
  -e MEM0_API_URL=http://host.docker.internal:8000 \
  -e MEM0_API_KEY=your_key \
  mem0-mcp-server
```

### PM2éƒ¨ç½²

```bash
# å®‰è£…PM2
npm install -g pm2

# å¯åŠ¨æœåŠ¡
pm2 start npm --name "mem0-mcp" -- run start:http:external

# ä¿å­˜é…ç½®
pm2 save
pm2 startup
```

### systemdæœåŠ¡

```ini
[Unit]
Description=Mem0 MCP Server
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/opt/mem0_mcp_server
ExecStart=/usr/bin/node dist/index.js --http --host 0.0.0.0 --port 8081
Restart=on-failure
Environment=MEM0_API_URL=http://localhost:8000

[Install]
WantedBy=multi-user.target
```

## ğŸ’» å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
mem0_mcp_server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts           # ä¸»å…¥å£
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ index.ts       # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ client/
â”‚   â”‚   â””â”€â”€ mem0-api.ts    # Mem0 APIå®¢æˆ·ç«¯
â”‚   â””â”€â”€ tools/
â”‚       â””â”€â”€ index.ts       # å·¥å…·å®ç°
â”œâ”€â”€ dist/                  # ç¼–è¯‘è¾“å‡º
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScripté…ç½®
â””â”€â”€ README.md            # æœ¬æ–‡æ¡£
```

### å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼(è‡ªåŠ¨é‡è½½)
npm run dev

# æ„å»ºé¡¹ç›®
npm run build

# è¿è¡Œæµ‹è¯•
npm test

# ä»£ç æ£€æŸ¥
npm run lint

# æ ¼å¼åŒ–ä»£ç 
npm run format
```

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `src/tools/index.ts` ä¸­æ·»åŠ å·¥å…·æ–¹æ³•
2. åœ¨ `src/index.ts` ä¸­æ³¨å†Œå·¥å…·
3. æ›´æ–°æœ¬READMEçš„å·¥å…·è¯´æ˜

## ğŸ”§ MCPå®¢æˆ·ç«¯é…ç½®

### Claude Desktop

ç¼–è¾‘ `claude_desktop_config.json`:

```json
{
  "mcpServers": {
    "mem0": {
      "transport": "http",
      "endpoint": "http://localhost:8081/mcp",
      "env": {
        "MEM0_API_KEY": "your_api_key"
      }
    }
  }
}
```

### å…¶ä»–MCPå®¢æˆ·ç«¯

```json
{
  "servers": [
    {
      "name": "mem0",
      "type": "http",
      "url": "http://localhost:8081/mcp",
      "headers": {
        "Authorization": "Token your_api_key"
      }
    }
  ]
}
```

## â“ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æ— æ³•è¿æ¥åˆ°Mem0 API**
```bash
# æ£€æŸ¥Mem0æœåŠ¡çŠ¶æ€
curl http://localhost:8000/health

# éªŒè¯APIå¯†é’¥
curl -H "Authorization: Token YOUR_KEY" http://localhost:8000/v1/memories/
```

**Q: ä¼šè¯IDæ— æ•ˆ**
- ç¡®ä¿å®¢æˆ·ç«¯æ­£ç¡®å¤„ç†mcp-session-id header
- æ£€æŸ¥ä¼šè¯è¶…æ—¶è®¾ç½®

**Q: CORSé”™è¯¯**
- è®¾ç½® `MCP_CORS_ORIGINS=*` å…è®¸æ‰€æœ‰æº
- æˆ–æŒ‡å®šå…·ä½“çš„å…è®¸æº

**Q: ç«¯å£å·²å ç”¨**
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -i :8081

# æˆ–ä½¿ç”¨å…¶ä»–ç«¯å£
npm run start:http -- --port 8082
```

### æ—¥å¿—è°ƒè¯•

```bash
# å¯ç”¨è°ƒè¯•æ—¥å¿—
MCP_DEV_MODE=true npm run start:http

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/mcp-server.log
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- **è¿æ¥æ± **: Mem0å®¢æˆ·ç«¯ä½¿ç”¨æŒä¹…è¿æ¥
- **é‡è¯•æœºåˆ¶**: æŒ‡æ•°é€€é¿ç®—æ³•
- **è¶…æ—¶æ§åˆ¶**: å¯é…ç½®çš„è¯·æ±‚è¶…æ—¶
- **å¹¶å‘é™åˆ¶**: é˜²æ­¢èµ„æºè€—å°½

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ç”Ÿäº§ç¯å¢ƒ**:
   - ä½¿ç”¨HTTPS
   - å¯ç”¨è®¤è¯
   - é™åˆ¶CORSæº
   - é…ç½®é˜²ç«å¢™

2. **APIå¯†é’¥**:
   - ä½¿ç”¨ç¯å¢ƒå˜é‡
   - å®šæœŸè½®æ¢
   - é™åˆ¶æƒé™èŒƒå›´

3. **ç½‘ç»œ**:
   - ä½¿ç”¨ç§æœ‰ç½‘ç»œ
   - é…ç½®VPNè®¿é—®
   - ç›‘æ§å¼‚å¸¸æµé‡

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

1. Forké¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤å˜æ›´
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ”— ç›¸å…³é“¾æ¥

- [MCPè§„èŒƒ](https://modelcontextprotocol.io)
- [Mem0æ–‡æ¡£](https://docs.mem0.ai)
- [TypeScriptæ‰‹å†Œ](https://www.typescriptlang.org/docs/)
- [é—®é¢˜åé¦ˆ](https://github.com/your-repo/issues)

---

ğŸ’¡ **æç¤º**: é‡åˆ°é—®é¢˜ï¼ŸæŸ¥çœ‹[æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)æˆ–æäº¤[Issue](https://github.com/your-repo/issues)

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼